---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import { InteractiveGlobe } from '../components/InteractiveGlobe';
---

<Layout title="Jorge Cabrera - Desarrollo Fullstack & UX">
  <Navbar />
  
  <!-- SLIDE 1: Hero con Esfera y Cita -->
  <section id="intro" class="relative min-h-screen flex items-center justify-center pt-20 bg-[#111111] overflow-visible">
    <!-- Grid cuadriculado de fondo -->
    <div class="absolute inset-0 opacity-5" style="background-image: repeating-linear-gradient(90deg, #ffffff 0%, #ffffff 1px, transparent 1px, transparent 4%), repeating-linear-gradient(0deg, #ffffff 0%, #ffffff 1px, transparent 1px, transparent 4%); background-size: 50px 50px;"></div>
    <InteractiveGlobe client:idle />
  </section>

  <!-- SLIDE 2: Soluciones Digitales -->
  <section class="min-h-screen flex items-center justify-center bg-white">
    <div class="container mx-auto px-6 text-center w-full">
      <h1 class="hero-title mb-12">
        <span class="hero-main" data-i18n="hero-main">Soluciones digitales</span><br/>
        <span class="hero-secondary" data-i18n="hero-secondary">para un mundo din谩mico</span>
      </h1>
    </div>
  </section>

  <style>
    /* Timeline header responsive fix */
    .journey-section h2 {
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-width: 100%;
    }

    @media (max-width: 640px) {
      .journey-section h2 {
        font-size: clamp(1.5rem, 5vw, 1.875rem);
        padding: 0 0.5rem;
      }
      
      .case-study-title {
        font-size: clamp(1.5rem, 6vw, 1.875rem) !important;
        padding: 0 0.5rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
      
      .advantage-title {
        font-size: clamp(1.5rem, 6vw, 2rem) !important;
        padding: 0 0.5rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
      
      .contact-title {
        font-size: clamp(1.5rem, 6vw, 1.875rem) !important;
        padding: 0 0.5rem;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }
    }
  </style>

  <!-- SLIDE 3: Servicios -->
  <section class="min-h-screen flex items-center justify-center bg-white">
    <div class="container mx-auto px-6 w-full py-20">
      <h2 class="text-3xl sm:text-4xl md:text-6xl lg:text-7xl font-black font-['Syne'] text-center mb-6 text-[#111] leading-tight px-2" data-i18n="services-title">
        Expertise
      </h2>
      <p class="text-base sm:text-lg md:text-xl text-neutral-500 text-center mb-16 max-w-xl mx-auto font-light italic" data-i18n="services-subtitle" style="font-family: 'Playfair Display', serif;">
        De la idea al despliegue
      </p>
      
      <div class="services-bento max-w-6xl mx-auto">
        <!-- Servicio 1 - E-commerce & Tiendas Online -->
        <div class="service-card service-card-1">
          <div class="text-5xl mb-4"></div>
          <h3 class="text-2xl font-bold font-['Poppins'] mb-3 text-white" data-i18n="service-ecommerce-title">E-commerce & Tiendas Online</h3>
          <p class="text-white/90 leading-relaxed mb-3" data-i18n="service-ecommerce-desc">
            Tiendas online sin comisiones con panel de autoadministraci贸n. Actualiza productos, precios e inventario sin conocimientos t茅cnicos. Integraci贸n WhatsApp Business.
          </p>
          <p class="text-white/70 text-sm mb-3">
            <strong>Ejemplo:</strong> LocalShop Pro
          </p>
          <div class="flex flex-wrap gap-2">
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">Next.js</span>
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">Convex</span>
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">WhatsApp</span>
          </div>
        </div>
        
        <!-- Servicio 2 - Sitios Web & Presencia Digital -->
        <div class="service-card service-card-2">
          <div class="text-5xl mb-4"></div>
          <h3 class="text-2xl font-bold font-['Poppins'] mb-3" data-i18n="service-website-title">Sitios Web & Presencia Digital</h3>
          <p class="leading-relaxed mb-3" data-i18n="service-website-desc">
            Sitios web corporativos, landing pages, portfolios profesionales. Dise帽o responsive, optimizaci贸n SEO, velocidad ultra-r谩pida. Presencia digital completa para tu empresa.
          </p>
          <div class="flex flex-wrap gap-2">
            <span class="px-2 py-1 rounded-full text-xs">Astro</span>
            <span class="px-2 py-1 rounded-full text-xs">React</span>
            <span class="px-2 py-1 rounded-full text-xs">SEO</span>
          </div>
        </div>
        
        <!-- Servicio 3 - Sistemas ERP/CRM -->
        <div class="service-card service-card-3">
          <div class="text-5xl mb-4">锔</div>
          <h3 class="text-2xl font-bold font-['Poppins'] mb-3 text-white" data-i18n="service-erp-title">Sistemas ERP/CRM a Medida</h3>
          <p class="text-white/90 leading-relaxed mb-3" data-i18n="service-erp-desc">
            Software de gesti贸n empresarial personalizado. Inventarios, facturaci贸n, control de flujos y automatizaci贸n de procesos internos.
          </p>
          <p class="text-white/70 text-sm mb-3">
            <strong>Ejemplo:</strong> Importadora D&R
          </p>
          <div class="flex flex-wrap gap-2">
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">React</span>
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">Supabase</span>
            <span class="px-2 py-1 bg-white/20 rounded-full text-xs text-white">PostgreSQL</span>
          </div>
        </div>
        
        <!-- Servicio 4 - Consultor铆a UX -->
        <div class="service-card service-card-4">
          <div class="text-5xl mb-4"></div>
          <h3 class="text-2xl font-bold font-['Poppins'] mb-3 text-white" data-i18n="service-consulting-title">Consultor铆a UX & Transformaci贸n Digital</h3>
          <p class="text-white/90 leading-relaxed" data-i18n="service-consulting-desc">
            Diagn贸stico de procesos y oportunidades. Dise帽o de experiencia centrado en el usuario. Digitalizaci贸n de flujos de trabajo a ecosistemas digitales.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- SLIDE 4: Proyectos Desplegados -->
  <section class="min-h-screen flex items-center justify-center bg-white">
    <div class="container mx-auto px-4 sm:px-6 w-full py-20">
      <div class="text-center mb-12">
        <h2 class="case-study-title text-2xl xs:text-3xl sm:text-4xl md:text-5xl font-black font-['Syne'] mb-4 text-[#111] leading-tight" data-i18n="case-title">
          Proyectos Desplegados
        </h2>
      </div>
      
      <!-- Caso 1: LocalShop Pro -->
      <div class="case-study-bento max-w-6xl mx-auto mb-12">
        <!-- Imagen Grande (Izquierda) -->
        <div class="bento-image">
          <img src="/img/Mas-Pizza-Logo-Placeholder.jpg" alt="LocalShop Pro - Mas Pizza u帽oa" class="w-full h-full object-cover rounded-2xl">
        </div>
        
        <!-- Contenido (Derecha Superior) -->
        <div class="bento-content">
          <h3 class="text-3xl md:text-4xl font-['Syne'] font-bold mb-3 text-[#111]" data-i18n="case-company2">LocalShop Pro</h3>
          <p class="text-lg text-neutral-600 leading-relaxed" data-i18n="case-tagline2">
            De perder m谩rgenes a vender directo: E-commerce sin comisiones para negocios locales
          </p>
        </div>
        
        <!-- M茅tricas (Derecha Inferior) -->
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#DC2626] mb-1">5 d铆as</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-speed">Velocidad</div>
        </div>
        
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#DC2626] mb-1">0%</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-commission">Comisiones</div>
        </div>
        
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#DC2626] mb-1">80%</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-automation">Automatizaci贸n</div>
        </div>
      </div>
      
      <!-- CTA LocalShop Pro -->
      <div class="text-center mt-8 mb-16">
        <a 
          href="/proyectos/localshop-pro" 
          class="inline-flex items-center gap-2 px-8 py-4 bg-[#111] text-white font-semibold rounded-full transition-all hover:scale-105 no-underline"
          style="box-shadow: 0 0 20px rgba(0, 0, 0, 0.4), 0 0 40px rgba(0, 0, 0, 0.2); transition: all 0.3s ease;"
          onmouseover="this.style.boxShadow='0 0 30px rgba(0, 0, 0, 0.6), 0 0 60px rgba(0, 0, 0, 0.4)'"
          onmouseout="this.style.boxShadow='0 0 20px rgba(0, 0, 0, 0.4), 0 0 40px rgba(0, 0, 0, 0.2)'"
        >
          <span data-i18n="case-cta2">Ver Proyecto Desplegado</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </a>
      </div>

      <!-- Caso 2: Importadora D&R -->
      <div class="case-study-bento max-w-6xl mx-auto">
        <!-- Imagen Grande (Izquierda) -->
        <div class="bento-image">
          <img src="/img/Caso_exito_app.jpg" alt="Stock Importadora D&R" class="w-full h-full object-cover rounded-2xl">
        </div>
        
        <!-- Contenido (Derecha Superior) -->
        <div class="bento-content">
          <h3 class="text-3xl md:text-4xl font-['Syne'] font-bold mb-3 text-[#111]" data-i18n="case-company">Importadora D&R</h3>
          <p class="text-lg text-neutral-600 leading-relaxed" data-i18n="case-tagline">
            Del caos al orden: Soluci贸n ERP que elimin贸 los descuadres de inventario
          </p>
        </div>
        
        <!-- M茅tricas (Derecha Inferior) -->
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#b80000] mb-1">100%</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-precision">Precisi贸n</div>
        </div>
        
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#b80000] mb-1">80%</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-efficiency">Eficiencia</div>
        </div>
        
        <div class="bento-metric">
          <div class="text-4xl font-black text-[#b80000] mb-1">&lt;2s</div>
          <div class="text-sm text-neutral-600 font-semibold" data-i18n="case-load">Carga</div>
        </div>
      </div>
      
      <!-- CTA Importadora D&R -->
      <div class="text-center mt-8">
        <a 
          href="/proyectos/importadora-dr" 
          class="inline-flex items-center gap-2 px-8 py-4 bg-[#111] text-white font-semibold rounded-full transition-all hover:scale-105 no-underline"
          style="box-shadow: 0 0 20px rgba(0, 0, 0, 0.4), 0 0 40px rgba(0, 0, 0, 0.2); transition: all 0.3s ease;"
          onmouseover="this.style.boxShadow='0 0 30px rgba(0, 0, 0, 0.6), 0 0 60px rgba(0, 0, 0, 0.4)'"
          onmouseout="this.style.boxShadow='0 0 20px rgba(0, 0, 0, 0.4), 0 0 40px rgba(0, 0, 0, 0.2)'"
        >
          <span data-i18n="case-cta">Ver Proyecto Desplegado</span>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
          </svg>
        </a>
      </div>
    </div>
  </section>
  
  <!-- SLIDE 5: Contacto + Footer -->
  <section class="min-h-screen flex items-center justify-center bg-white">
    <div class="container mx-auto px-4 sm:px-6 w-full">
      <div class="max-w-4xl mx-auto text-center mb-20">
        <h2 class="contact-title text-2xl xs:text-3xl sm:text-4xl md:text-5xl font-black font-['Syne'] mb-6 text-[#111] leading-tight" data-i18n="contact-main-title">
          Hablemos
        </h2>
        <p class="text-xl text-neutral-700 mb-12 max-w-2xl mx-auto leading-relaxed font-['Poppins']" data-i18n="contact-description">
          No solo dise帽o. Resuelvo problemas. Con la l贸gica de un gestor y la empat铆a de un profesor. Hablemos de tu pr贸ximo proyecto.
        </p>
        
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a 
            href="mailto:jcabreralabbe@gmail.com"
            class="px-8 py-4 border-2 border-[#111] text-[#111] font-semibold rounded-full transition-all hover:bg-[#b80000] hover:border-[#b80000] hover:text-white hover:scale-105 no-underline"
            data-i18n="contact-email-button"
          >
            Email
          </a>
          <a 
            href="https://linkedin.com/in/jorge-cabrera-ux" 
            target="_blank"
            rel="noopener noreferrer"
            class="px-8 py-4 border-2 border-[#111] text-[#111] font-semibold rounded-full transition-all hover:bg-[#b80000] hover:border-[#b80000] hover:text-white hover:scale-105 no-underline"
            data-i18n="contact-linkedin-button"
          >
            LinkedIn
          </a>
        </div>
      </div>
      <Footer />
    </div>
  </section>

  <style>
    // Animaciones de scroll para timeline items
    document.addEventListener('DOMContentLoaded', () => {
      const timelineItems = document.querySelectorAll('.timeline-item');
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('is-visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      
      timelineItems.forEach(item => {
        observer.observe(item);
      });

      // Efecto de rotaci贸n del t铆tulo al hacer scroll
      const heroMain = document.querySelector('.hero-main');
      const heroSecondary = document.querySelector('.hero-secondary');
      
      if (heroMain && heroSecondary) {
        window.addEventListener('scroll', () => {
          const scrollY = window.scrollY;
          const rotation = Math.min(scrollY / 20, 15);
          document.documentElement.style.setProperty('--scroll-rotation', `${rotation}`);
        });
      }

      // Sistema de traducci贸n
      const translations = {
        es: {
          'hero-main': 'Soluciones digitales',
          'hero-secondary': 'para un mundo din谩mico',
          'journey-title': 'Mi Proceso de Transformaci贸n',
          'journey-step1-title': ' Entiendo',
          'journey-step1-desc': 'Mapeo procesos reales, detecto cuellos de botella y encuentro oportunidades de digitalizaci贸n. No dise帽o soluciones sin entender primero el problema real.',
          'journey-step2-title': ' Dise帽o',
          'journey-step2-desc': 'Creo interfaces intuitivas que se adaptan al flujo de trabajo real de los usuarios. El dise帽o no es decoraci贸n, es arquitectura de la experiencia.',
          'journey-step3-title': '锔 Ejecuto',
          'journey-step3-desc': 'Desarrollo soluciones robustas, escalables y listas para producci贸n con stack moderno: React, TypeScript, Supabase y PostgreSQL. Del prototipo al producto funcional.',
          'services-title': 'Expertise',
          'services-subtitle': 'De la idea al despliegue',
          'service-fullstack-title': 'Desarrollo Fullstack a Medida',
          'service-fullstack-desc': 'Arquitecturas modernas y escalables con React, Node, Supabase y PostgreSQL. Soluciones llave en mano dise帽adas espec铆ficamente para las reglas de tu industria.',
          'service-ux-title': 'Consultor铆a UX y Diagn贸stico',
          'service-ux-desc': 'Utilizo metodolog铆as de Design Thinking para mapear procesos reales y encontrar oportunidades de digitalizaci贸n.',
          'service-digital-title': 'Digitalizaci贸n de Procesos',
          'service-digital-desc': 'Transformaci贸n de flujos de trabajo an谩logos en ecosistemas digitales inmutables. Especialidad en integridad de datos.',
          'case-title': 'Proyectos Desplegados',
          'case-company': 'Importadora D&R',
          'case-tagline': 'Del caos al orden: Soluci贸n ERP que elimin贸 los descuadres de inventario',
          'case-precision': 'Precisi贸n',
          'case-efficiency': 'Eficiencia',
          'case-load': 'Carga',
          'case-cta': 'Ver Proyecto Desplegado',
          'case-company2': 'LocalShop Pro',
          'case-tagline2': 'De perder m谩rgenes a vender directo: E-commerce sin comisiones para negocios locales',
          'case-speed': 'Velocidad',
          'case-commission': 'Comisiones',
          'case-automation': 'Automatizaci贸n',
          'case-cta2': 'Ver Proyecto Desplegado',
          'advantage-title': '驴Por Qu茅 Trabajar Conmigo?',
          'advantage-title-full': ' Mi background es mi superpoder',
          'contact-main-title': 'Hablemos',
          'contact-description': 'No solo dise帽o. Resuelvo problemas. Con la l贸gica de un gestor y la empat铆a de un profesor. Hablemos de tu pr贸ximo proyecto.',
          'contact-email-button': 'Email',
          'contact-linkedin-button': 'LinkedIn',
          'contact-title': '驴Listo para Digitalizar tu Operaci贸n?',
          'contact-subtitle': 'Conversemos sobre c贸mo transformar tus procesos en soluciones digitales robustas',
          'contact-cta': 'Contactar por LinkedIn'
        },
        en: {
          'hero-main': 'Digital solutions',
          'hero-secondary': 'for a dynamic world',
          'journey-title': 'My Transformation Process',
          'journey-step1-title': ' Understand',
          'journey-step1-desc': 'I map real processes, detect bottlenecks and find digitalization opportunities. I don\'t design solutions without first understanding the real problem.',
          'journey-step2-title': ' Design',
          'journey-step2-desc': 'I create intuitive interfaces that adapt to users\' real workflow. Design is not decoration, it\'s experience architecture.',
          'journey-step3-title': '锔 Execute',
          'journey-step3-desc': 'I develop robust, scalable, production-ready solutions with modern stack: React, TypeScript, Supabase and PostgreSQL. From prototype to functional product.',
          'services-title': 'Expertise',
          'services-subtitle': 'From idea to deployment',
          'service-fullstack-title': 'Custom Fullstack Development',
          'service-fullstack-desc': 'Modern and scalable architectures with React, Node, Supabase and PostgreSQL. Turnkey solutions designed specifically for your industry rules.',
          'service-ux-title': 'UX Consulting & Diagnosis',
          'service-ux-desc': 'I use Design Thinking methodologies to map real processes and find digitalization opportunities.',
          'service-digital-title': 'Process Digitalization',
          'service-digital-desc': 'Transformation of analog workflows into immutable digital ecosystems. Specialty in data integrity.',
          'case-title': 'Deployed Projects',
          'case-company': 'Importadora D&R',
          'case-tagline': 'From chaos to order: ERP solution that eliminated inventory discrepancies',
          'case-precision': 'Precision',
          'case-efficiency': 'Efficiency',
          'case-load': 'Load',
          'case-cta': 'View Deployed Project',
          'case-company2': 'LocalShop Pro',
          'case-tagline2': 'From losing margins to selling direct: Commission-free e-commerce for local businesses',
          'case-speed': 'Speed',
          'case-commission': 'Commissions',
          'case-automation': 'Automation',
          'case-cta2': 'View Deployed Project',
          'advantage-title': 'Why Work With Me?',
          'advantage-title-full': ' My background is my superpower',
          'contact-main-title': 'Let\'s Talk',
          'contact-description': 'I don\'t just design. I solve problems. With the logic of a manager and the empathy of a teacher. Let\'s talk about your next project.',
          'contact-email-button': 'Email',
          'contact-linkedin-button': 'LinkedIn',
          'contact-title': 'Ready to Digitalize Your Operation?',
          'contact-subtitle': "Let's talk about how to transform your processes into robust digital solutions",
          'contact-cta': 'Contact via LinkedIn'
        }
      };

      function applyTranslations(locale: string) {
        const t = translations[locale as 'es' | 'en'] || translations.es;
        
        // Aplicar traducciones a elementos con data-i18n
        document.querySelectorAll('[data-i18n]').forEach(element => {
          const key = element.getAttribute('data-i18n');
          if (key && t[key as keyof typeof t]) {
            // Si el elemento tiene hijos (como strong), usar textContent
            // De lo contrario, preservar la estructura HTML si existe
            if (element.children.length === 0) {
              element.textContent = t[key as keyof typeof t];
            } else {
              // Para elementos con estructura HTML, reemplazar solo el texto principal
              const textNodes = Array.from(element.childNodes).filter(node => node.nodeType === 3);
              if (textNodes.length > 0) {
                element.textContent = t[key as keyof typeof t];
              }
            }
          }
        });
      }

      // Aplicar traducciones al cargar
      const savedLocale = localStorage.getItem('locale') || 'es';
      applyTranslations(savedLocale);

      // Escuchar cambios de idioma
      window.addEventListener('localeChanged', (event: Event) => {
        const customEvent = event as CustomEvent<string>;
        applyTranslations(customEvent.detail);
      });
    });
  </script>
</Layout>
